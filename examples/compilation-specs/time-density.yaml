name: calculate_time_density
cache_root: gcs://my-bucket/ecoscope/cache/dag-runs
workflow:
  - task: get_subjectgroup_observations
    with: {}
  - task: process_relocations
    with:
      observations: get_subjectgroup_observations
  - task: relocations_to_trajectory
    with:
      relocations: process_relocations
  - task: calculate_time_density
    with:
      trajectory_gdf: relocations_to_trajectory
  - task: draw_ecomap
    with:
      geodataframe: calculate_time_density
  - task: persist_text
    with:
      text: draw_ecomap
  - task: create_map_widget_single_view
    with:
      data: persist_text
  - task: gather_dashboard
    with:
      widgets: create_map_widget_single_view
