name: Patrols Dashboard
tasks:
  get_subjectgroup_observations: {}
  get_earthranger_events: {}
  etl_events:
    dataframe: get_earthranger_events
  etl_observations:
    dataframe: get_subjectgroup_observations
  process_relocations:
    observations: etl_observations
  relocations_to_trajectory:
    relocations: process_relocations
  calculate_time_density:
    trajectory_gdf: relocations_to_trajectory
  set_groupers: {}
  groupby_observations:
    groupers: set_groupers
    df: relocations_to_trajectory
  set_styles: {}
  draw_ecomap_patrols:
    style: set_styles
    trajectory_gdf: groupby_observations
  draw_ecomap_etd:
    style: set_styles
    trajectory_gdf: calculate_time_density
  groupby_events:
    groupers: set_groupers
    df: etl_events
  plot_events_ungrouped:
    style: set_styles
    events: etl_events
  plot_events_grouped:
    style: set_styles
    events: groupby_events
  calculate_single_values:
    trajectory_gdf: groupby_observations
  make_patrols_dashboard:
    trajectory_grouped_single_values: calculate_single_values
    trajectory_grouped_maps: draw_ecomap_patrols
    time_density_map: draw_ecomap_etd
    events_grouped_plots: plot_events_grouped
    events_ungrouped_plot: plot_events_ungrouped
